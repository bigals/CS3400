<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <title>CS3400 JavaScript Website: JS Examples</title>
        
        <!--Custom Style Sheets-->
        <link rel="stylesheet" href="Styles/styles.css" />
        <link rel="stylesheet" href="Styles/navBar.css" />
        
        <!--JQuery Library-->
        <script src="https://code.jquery.com/jquery-1.11.1.min.js"></script>
        
        <!--JQuery UI Library-->
        <link rel="stylesheet" href="//ajax.googleapis.com/ajax/libs/jqueryui/1.11.1/themes/smoothness/jquery-ui.css" />
        <script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.11.1/jquery-ui.min.js"></script>
        
        <!--Custom Scripts-->
        <script src="Scripts/scripts.js"></script>
        
        <!--WebGL Library for rendering example properly-->
        <script src="Scripts/libs.js"></script>
    </head>
    <body>
        <div id="pageWrapper">
            <header>
                <h1>JavaScript Examples</h1>
                <nav id="navBar">
                    <ul id="menu">
                        <!--Home Menu -->
                        <li>
                            <a href="index.html?tOpVal=1">Home</a>
                            <ul>
                                <li><a href="index.html?tOpVal=1">Welcome</a></li>
                                <li><a href="index.html?tOpVal=2">Security Issues</a></li>
                                <li><a href="index.html?tOpVal=3">Standards/Browsers</a></li>
                                <li><a href="index.html?tOpVal=4">Embedded Browsers</a></li>
                            </ul>
                        </li>
                        
                        <!--JavaScript Best Practices Menu -->
                        <li>
                            <a href="bestPractices.html?tOpVal=1">Best Practices</a>
                            <ul>
                                <li><a href="bestPractices.html?tOpVal=1">Paradigms to Use</a></li>
                                <li><a href="bestPractices.html?tOpVal=2">Paradigms to Avoid</a></li>
                                <li><a href="bestPractices.html?tOpVal=3">Superior Paradigms</a></li>
                                <li><a href="bestPractices.html?tOpVal=4">Naming Conventions</a></li>
                                <li><a href="bestPractices.html?tOpVal=5">Format Conventions</a></li>
                            </ul>
                        </li>
                        
                         <!--JavScript Unit Testing Menu -->
                        <li>
                            <a href="jsTesting.html?tOpVal=1">Unit Testing</a>
                            <ul>
                                <li><a href="jsTesting.html?tOpVal=1">Unit Testing 0</a></li>
                                <li><a href="jsTesting.html?tOpVal=2">Unit Testing 1</a></li>
                                <li><a href="jsTesting.html?tOpVal=3">Unit Testing 2</a></li>
                                <li><a href="jsTesting.html?tOpVal=4">Unit Testing 3</a></li>
                                <li><a href="jsTesting.html?tOpVal=5">Unit Testing 4</a></li>
                            </ul>
                        </li>
                        <!--JavaScript Debugging Menu -->
                        <li>
                            <a href="jsDebugging.html?tOpVal=1">Debugging & IDEs</a>
                            <ul>
                                <li><a href="jsDebugging.html?tOpVal=1">Debugging Tools</a></li>
                                <li><a href="jsDebugging.html?tOpVal=2">JavaScript IDEs</a></li>
                            </ul>
                        </li>
                        <!--JavaScript Tutorials/Examples Menu -->
                        <li>
                            <a href="examples.html?tOpVal=1">JS Tutorials/Examples</a>
                            <ul>
                                <li><a href="examples.html?tOpVal=1">Various JS Examples</a></li>
                                <li><a href="examples.html?tOpVal=2">Local File Access</a></li>
                                <li><a href="examples.html?tOpVal=3">Basic Canvas</a></li>
                                <li><a href="examples.html?tOpVal=4">KineticJS Canvas</a></li>
                                <li><a href="examples.html?tOpVal=5">Drag & Drop</a></li>
                                <li><a href="examples.html?tOpVal=6">WebGL</a></li>
                            </ul>
                        </li>
                        <!--JQuery Tutorials/Examples Menu -->
                        <li>
                            <a href="jqueryBestPract.html?tOpVal=1">JQuery</a>
                            <ul>
                                <li><a href="jqueryBestPract.html?tOpVal=1">Intro to JQuery</a></li>
                                <li><a href="jqueryBestPract.html?tOpVal=2">Selectors</a></li>
                                <li><a href="jqueryBestPract.html?tOpVal=3">DOM Manipulation</a></li>
                                <li><a href="jqueryBestPract.html?tOpVal=4">Events</a></li>
                                <li><a href="jqueryBestPract.html?tOpVal=5">Ajax</a></li>
                                <li><a href="jqueryBestPract.html?tOpVal=6">Effects and Animations</a></li>
                                <li><a href="jqueryBestPract.html?tOpVal=7">Plugins</a></li>
                                <li><a href="jqueryBestPract.html?tOpVal=8">Chaining</a></li>
                                <li><a href="jqueryBestPract.html?tOpVal=9">Miscellaneous</a></li>
                            </ul>
                        </li>
                        <!--JavaScript Assignment Menu -->
                        <li>
                            <a href="assignment.html?tOpVal=1">Simple Assignment</a>
                        </li>
                    </ul>									
                </nav>
            </header>
            <div id="content">
                <div id="contentNavBar">
                    <div id="cNav-1" class="contentBtn">Various JS Examples</div>
                    <div id="cNav-2" class="contentBtn">Local File Access</div>
                    <div id="cNav-3" class="contentBtn">Basic Canvas</div>
                    <div id="cNav-4" class="contentBtn">KineticJS Canvas</div>
                    <div id="cNav-5" class="contentBtn">Drag & Drop</div>
                    <div id="cNav-6" class="contentBtn">WebGL</div>
                </div>
                <div id="contentFrame">
                    <div id="content-1" class="contentPanels">
                        <h2>Various JavaScript Examples</h2>
                    </div>
                    <div id="content-2" class="contentPanels htmlStorCanv">
                        <h2>Local File Access Examples</h2>
                        <h3>Files on Local Client Machine</h3>
                        <div id="exampleArea">
                            <textarea id="ldedFile"></textarea>
                            <div>Select a File to Load:</div>
                            <input type="file" id="fileToLoad"></input>
                            <button id="loadFileBtn">Load Selected File</button>
                        </div>
                        <div class="htmlContainer">
                            <textarea class="htmlCode">
&lt;textarea id="ldedFile"&gt;&lt;/textarea&gt;
&lt;div&gt;Select a File to Load:&lt;/div&gt;
&lt;input type="file" id="fileToLoad"&gt;&lt;/input&gt;
&lt;button id="loadFileBtn"&gt;Load Selected File&lt;/button&gt;
                            </textarea>
                        </div>
                        <div class="jsContainer">
                            <textarea class="jsCode">
function loadFileAsText()
{
	var fileToLoad = document.getElementById("fileToLoad").files[0];

	var fileReader = new FileReader();
	fileReader.onload = function(fileLoadedEvent) 
	{
		var textFromFileLoaded = fileLoadedEvent.target.result;
		
        //Output to Screen		
		document.getElementById("ldedFile").value = textFromFileLoaded;		
		
	};
	fileReader.readAsText(fileToLoad, "UTF-8");
}
$(document).ready(function() {
    $('#loadFileBtn').click(function() {
        loadFileAsText();
    });
}
                            </textarea>
                        </div>
                        <h3>Files stored in HTML5 Local Storage</h3>
                        <div id="exampleArea">
                            <canvas id="drawSurface" width="500" height="500" style="border:1px solid black;"></canvas>
                            <div>
                                <button id="erase">Erase</button>
                                <button id="save">Save</button>
                                <button id="load">Load</button>
                            </div>
                        </div>
                        <div class="htmlContainer">
                            <textarea class="htmlCode">
&lt;canvas id="drawSurface" width="500" height="500" style="border:1px solid black;"&gt;&lt;/canvas&gt;
&lt;div&gt;
    &lt;button id="erase"&gt;Erase&lt;/button&gt;
    &lt;button id="save"&gt;Save&lt;/button&gt;
    &lt;button id="load"&gt;Load&lt;/button&gt;
&lt;/div&gt;
                            </textarea>
                        </div>
                        <div class="jsContainer">
                            <textarea class="jsCode">
function checkAndInitLStoreCanv() {
    if($('#content-2').hasClass('htmlStorCanv')) {
        window.addEventListener('load', init, false); // Safety first.

        function init() {
            var canvas = document.getElementById('drawSurface'); // A static variable, due to the fact that one or more local functions access it.
            var context = canvas.getContext('2d'); // A static variable, due to the fact that one or more local functions access it.

            context.fillStyle = "purple";

            if (window.navigator.msPointerEnabled) {
                canvas.addEventListener('MSPointerMove', paintCanvas, false);
            }
            else {
                canvas.addEventListener('mousemove', paintCanvas, false);
            }

            document.getElementById('erase').addEventListener('click', eraseCanvas, false);
            document.getElementById('save').addEventListener('click', saveCanvas, false);
            document.getElementById('load').addEventListener('click', loadCanvas, false);

            function paintCanvas(event) { // The "event" object contains the position of the pointer/mouse.
                context.fillRect(event.offsetX, event.offsetY, 4, 4); // Draw a 4x4 rectangle at the given coordinates (relative to the canvas box). As of this writing, not all browsers support offsetX and offsetY.
            } // paintCanvas

            function saveCanvas() {
                window.localStorage.canvasImage = canvas.toDataURL(); // Save the user's drawing to persistent local storage.
            } // saveCanvas

            function eraseCanvas() {
                context.clearRect(0, 0, context.canvas.width, context.canvas.height);
            } // eraseCanvas

            function loadCanvas() {
                var img = new Image(); // The canvas drawImage() method expects an image object.

                img.src = window.localStorage.canvasImage; // Retrieve the last saved artistic achievement from persistent local storage.
                img.onload = function() { // Only render the saved drawing when the image object has fully loaded the drawing into memory.
                    context.drawImage(img, 0, 0); // Draw the image starting at canvas coordinate (0, 0) - the upper left-hand corner of the canvas.
                } // onload
            } // loadCanvas
        } // init
    }
}
$(document).ready(function() {
    checkAndInitLStoreCanv();
}
                            </textarea>
                        </div>
                    </div>  
                    <div id="content-3" class="contentPanels canvases">
                        <h2>Basic Canvas Examples</h2>
                        <div id="exampleArea">
                            <h3>Canvas 1</h3>
                            <canvas id="canvas1" width="200" height="100" style="border:1px solid #000000;"></canvas>
                            <h3>Canvas 2</h3>
                            <canvas id="canvas2" width="200" height="100" style="border:1px solid #000000;"></canvas>
                            <h3>Canvas 3</h3>
                            <canvas id="canvas3" width="200" height="100" style="border:1px solid #000000;"></canvas>
                            <h3>Canvas 4</h3>
                            <canvas id="canvas4" width="200" height="100" style="border:1px solid #000000;"></canvas>
                            <h3>Canvas 5</h3>
                            <canvas id="canvas5" width="200" height="100" style="border:1px solid #000000;"></canvas>
                            <h3>Canvas 6</h3>
                            <canvas id="canvas6" width="200" height="100" style="border:1px solid #000000;"></canvas>
                            <h3>Canvas 7</h3>
                            <canvas id="canvas7" width="200" height="100" style="border:1px solid #000000;"></canvas>
                            <h3>Canvas 8</h3>
                            <p>Image to use:</p>
                            <img id="scream" src="Images/img_the_scream.jpg" alt="The Scream" width="220" height="277" />
                            <p>Canvas:</p>
                            <canvas id="canvas8" width="250" height="300" style="border:1px solid #d3d3d3;"></canvas>
                        </div>
                        <div class="htmlContainer">
                            <textarea class="htmlCode">
&lt;!--Canvas 1--&gt;
&lt;canvas id="canvas1" width="200" height="100" style="border:1px solid #000000;"&gt;&lt;/canvas&gt;
&lt;!--Canvas 2--&gt;
&lt;canvas id="canvas2" width="200" height="100" style="border:1px solid #000000;"&gt;&lt;/canvas&gt;
&lt;!--Canvas 3--&gt;
&lt;canvas id="canvas3" width="200" height="100" style="border:1px solid #000000;"&gt;&lt;/canvas&gt;
&lt;!--Canvas 4--&gt;
&lt;canvas id="canvas4" width="200" height="100" style="border:1px solid #000000;"&gt;&lt;/canvas&gt;
&lt;!--Canvas 5--&gt;
&lt;canvas id="canvas5" width="200" height="100" style="border:1px solid #000000;"&gt;&lt;/canvas&gt;
&lt;!--Canvas 6--&gt;
&lt;canvas id="canvas6" width="200" height="100" style="border:1px solid #000000;"&gt;&lt;/canvas&gt;
&lt;!--Canvas 7--&gt;
&lt;canvas id="canvas7" width="200" height="100" style="border:1px solid #000000;"&gt;&lt;/canvas&gt;
&lt;!--Canvas 8--&gt;
&lt;p&gt;Image to use:&lt;/p&gt;
&lt;img id="scream" src="Images/img_the_scream.jpg" alt="The Scream" width="220" height="277" /&gt;
&lt;p&gt;Canvas:&lt;/p&gt;
&lt;canvas id="canvas8" width="250" height="300" style="border:1px solid #d3d3d3;"&gt;&lt;/canvas&gt;
                            </textarea>
                        </div>
                        <div class="jsContainer">
                            <textarea class="jsCode">
/* Script for #canvas1 */
var c = document.getElementById("canvas1");
var ctx = c.getContext("2d");
ctx.fillStyle = "#FF0000";
ctx.fillRect(0,0,150,75);

/* Script for #canvas2 */
var c = document.getElementById("canvas2");
var ctx = c.getContext("2d");
ctx.moveTo(0,0);
ctx.lineTo(200,100);
ctx.stroke();

/* Script for #canvas3 */
var c = document.getElementById("canvas3");
var ctx = c.getContext("2d");
ctx.beginPath();
ctx.arc(95,50,40,0,2*Math.PI);
ctx.stroke();

/* Script for #canvas4 */
var c = document.getElementById("canvas4");
var ctx = c.getContext("2d");
ctx.font = "30px Arial";
ctx.fillText("Hello World",10,50);

/* Script for #canvas5 */
var c = document.getElementById("canvas5");
var ctx = c.getContext("2d");
ctx.font = "30px Arial";
ctx.strokeText("Hello World",10,50);

/* Script for #canvas6 */
var c = document.getElementById("canvas6");
var ctx = c.getContext("2d");

// Create gradient
var grd = ctx.createLinearGradient(0,0,200,0);
grd.addColorStop(0,"red");
grd.addColorStop(1,"white");

// Fill with gradient
ctx.fillStyle = grd;
ctx.fillRect(10,10,150,80);

/* Script for #canvas7 */
var c = document.getElementById("canvas7");
var ctx = c.getContext("2d");

// Create gradient
var grd = ctx.createRadialGradient(75,50,5,90,60,100);
grd.addColorStop(0,"red");
grd.addColorStop(1,"white");

// Fill with gradient
ctx.fillStyle = grd;
ctx.fillRect(10,10,150,80);


/* Script for #canvas8 */
var c = document.getElementById("canvas8");
var ctx = c.getContext("2d");
var img = document.getElementById("scream");
ctx.drawImage(img,10,10);
                            </textarea>
                        </div>
                    </div>
                    <div id="content-4" class="contentPanels">
                        <h2>KineticJS Canvas Examples</h2>
                        <div id="exampleArea">
                            
                        </div>
                        <div class="htmlContainer">
                            <textarea class="htmlCode">

                            </textarea>
                        </div>
                        <div class="jsContainer">
                            <textarea class="jsCode">

                            </textarea>
                        </div>
                    </div>
                    <div id="content-5" class="contentPanels">
                        <h2>Drag & Drop Example</h2>
                        <div id="exampleArea">
                            <p>Drag the image into the rectangle:</p>
                            <div id="dragToDiv" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
                            <br>
                            <img id="drag1" src="Images/img_logo.gif" draggable="true" ondragstart="drag(event)" width="336" height="69" />
                        </div>
                        <div class="htmlContainer">
                            <textarea class="htmlCode">
&lt;p&gt;Drag the image into the rectangle:&lt;/p&gt;
&lt;div id="dragToDiv" ondrop="drop(event)" ondragover="allowDrop(event)"&gt;&lt;/div&gt;
&lt;br&gt;
&lt;img id="drag1" src="Images/img_logo.gif" draggable="true" ondragstart="drag(event)" width="336" height="69" /&gt;
                            </textarea>
                        </div>
                        <div class="jsContainer">
                            <textarea class="jsCode">
function allowDrop(ev) {
    ev.preventDefault();
}

function drag(ev) {
    ev.dataTransfer.setData("text/html", ev.target.id);
}

function drop(ev) {
    ev.preventDefault();
    var data = ev.dataTransfer.getData("text/html");
    ev.target.appendChild(document.getElementById(data));
}
                            </textarea>
                        </div>
                    </div>  
                    <div id="content-6" class="contentPanels webGLDemo">
                        <h2>WebGL Examples</h2>
                        <p>
                            WebGL is an interactive JavaScript API, that allows for eay rendering of both 2D and 3D grpahics, without any additional
                             plugins. Below is an example of a 3D rotating cube that was created through WebGL.
                        </p>
                        <h3>3D Rotating Cube</h3>
                        <div id="exampleArea">
                            <canvas id='rotCube' width="200" height="100"></canvas>
                        </div>
                        <div class="htmlContainer">
                            <textarea class="htmlCode">
&lt;canvas id='rotCube' width="200" height="100"&gt;&lt;/canvas&gt;
                            </textarea>
                        </div>
                        <div class="jsContainer">
                            <textarea class="jsCode">
function checkAndCreateGLCube() {
    var CANVAS=document.getElementById("rotCube");
    CANVAS.width=window.innerWidth;
    CANVAS.height=window.innerHeight;

    /*========================= GET WEBGL CONTEXT ========================= */
    try {
        var GL = CANVAS.getContext("experimental-webgl", {antialias: true});
    } catch (e) {
        alert("You are not webgl compatible :(") ;
        return false;
    } ;

    /*========================= SHADERS ========================= */

    var shader_vertex_source="\n\
    attribute vec3 position;\n\
    uniform mat4 Pmatrix;\n\
    uniform mat4 Vmatrix;\n\
    uniform mat4 Mmatrix;\n\
    attribute vec3 color; //the color of the point\n\
    varying vec3 vColor;\n\
    void main(void) { //pre-built function\n\
    gl_Position = Pmatrix*Vmatrix*Mmatrix*vec4(position, 1.);\n\
    vColor=color;\n\
    }";

    var shader_fragment_source="\n\
    precision mediump float;\n\
    varying vec3 vColor;\n\
    void main(void) {\n\
    gl_FragColor = vec4(vColor, 1.);\n\
    }";

    var get_shader=function(source, type, typeString) {
    var shader = GL.createShader(type);
    GL.shaderSource(shader, source);
    GL.compileShader(shader);
    if (!GL.getShaderParameter(shader, GL.COMPILE_STATUS)) {
      alert("ERROR IN "+typeString+ " SHADER : " + GL.getShaderInfoLog(shader));
      return false;
    }
    return shader;
    };

    var shader_vertex=get_shader(shader_vertex_source, GL.VERTEX_SHADER, "VERTEX");
    var shader_fragment=get_shader(shader_fragment_source, GL.FRAGMENT_SHADER, "FRAGMENT");

    var SHADER_PROGRAM=GL.createProgram();
    GL.attachShader(SHADER_PROGRAM, shader_vertex);
    GL.attachShader(SHADER_PROGRAM, shader_fragment);

    GL.linkProgram(SHADER_PROGRAM);

    var _Pmatrix = GL.getUniformLocation(SHADER_PROGRAM, "Pmatrix");
    var _Vmatrix = GL.getUniformLocation(SHADER_PROGRAM, "Vmatrix");
    var _Mmatrix = GL.getUniformLocation(SHADER_PROGRAM, "Mmatrix");

    var _color = GL.getAttribLocation(SHADER_PROGRAM, "color");
    var _position = GL.getAttribLocation(SHADER_PROGRAM, "position");

    GL.enableVertexAttribArray(_color);
    GL.enableVertexAttribArray(_position);

    GL.useProgram(SHADER_PROGRAM);

    /*========================= THE CUBE ========================= */
    //POINTS :
    var cube_vertex=[
    -1,-1,-1,

    0,0,0,

    1,-1,-1,

    1,0,0,

    1,1,-1,

    1,1,0,

    -1,1,-1,

    0,1,0,

    -1,-1,1,

    0,0,1,

    1,-1,1,

    1,0,1,

    1,1,1,

    1,1,1,

    -1,1,1,

    0,1,1
    ];

    var CUBE_VERTEX= GL.createBuffer ();
    GL.bindBuffer(GL.ARRAY_BUFFER, CUBE_VERTEX);
    GL.bufferData(GL.ARRAY_BUFFER,
                new Float32Array(cube_vertex),
    GL.STATIC_DRAW);

    //FACES :
    var cube_faces = [
    0,1,2,
    0,2,3,

    4,5,6,
    4,6,7,

    0,3,7,
    0,4,7,

    1,2,6,
    1,5,6,

    2,3,6,
    3,7,6,

    0,1,5,
    0,4,5

    ];
    var CUBE_FACES= GL.createBuffer ();
    GL.bindBuffer(GL.ELEMENT_ARRAY_BUFFER, CUBE_FACES);
    GL.bufferData(GL.ELEMENT_ARRAY_BUFFER,
                new Uint16Array(cube_faces),
    GL.STATIC_DRAW);

    /*========================= MATRIX ========================= */

    var PROJMATRIX=LIBS.get_projection(40, CANVAS.width/CANVAS.height, 1, 100);
    var MOVEMATRIX=LIBS.get_I4();
    var VIEWMATRIX=LIBS.get_I4();



    LIBS.translateZ(VIEWMATRIX, -6);

    /*========================= DRAWING ========================= */
    GL.enable(GL.DEPTH_TEST);
    GL.depthFunc(GL.LEQUAL);
    GL.clearColor(0.0, 0.0, 0.0, 0.0);
    GL.clearDepth(1.0);

    var time_old=0;
    var animate=function(time) {
    var dt=time-time_old;
    LIBS.rotateZ(MOVEMATRIX, dt*0.001);
    LIBS.rotateY(MOVEMATRIX, dt*0.002);
    LIBS.rotateX(MOVEMATRIX, dt*0.003);
    time_old=time;

    GL.viewport(0.0, 0.0, CANVAS.width, CANVAS.height);
    GL.clear(GL.COLOR_BUFFER_BIT | GL.DEPTH_BUFFER_BIT);
    GL.uniformMatrix4fv(_Pmatrix, false, PROJMATRIX);
    GL.uniformMatrix4fv(_Vmatrix, false, VIEWMATRIX);
    GL.uniformMatrix4fv(_Mmatrix, false, MOVEMATRIX);
    GL.vertexAttribPointer(_position, 3, GL.FLOAT, false,4*(3+3),0) ;
    GL.vertexAttribPointer(_color, 3, GL.FLOAT, false,4*(3+3),3*4) ;
    GL.bindBuffer(GL.ARRAY_BUFFER, CUBE_VERTEX);
    GL.bindBuffer(GL.ELEMENT_ARRAY_BUFFER, CUBE_FACES);
    GL.drawElements(GL.TRIANGLES, 6*2*3, GL.UNSIGNED_SHORT, 0);

    GL.flush();

    window.requestAnimationFrame(animate);
    };
    animate(0);
}
$(document).ready(function() {
    createWebGLCube();
});
                            </textarea>
                        </div>
                    </div>  
                </div>
            </div>
        </div>
    </body>
</html>